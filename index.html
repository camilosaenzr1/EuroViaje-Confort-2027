<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EuroPlan 2027 | Ruta Secuencial V8</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #f8fafc; }
        .city-btn.active { border-color: #2563eb; background-color: #eff6ff; border-width: 2px; }
        .order-badge { position: absolute; top: -8px; right: -8px; background: #2563eb; color: white; width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: bold; border: 2px solid white; }
        .custom-scroll::-webkit-scrollbar { width: 4px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
    </style>
</head>
<body class="flex flex-col lg:flex-row lg:h-screen lg:overflow-hidden">

    <aside class="w-full lg:w-[450px] bg-white border-r p-6 overflow-y-auto custom-scroll">
        <header class="mb-6">
            <h1 class="text-2xl font-extrabold italic text-blue-600">EUROPLAN V8</h1>
            <p class="text-[10px] font-black uppercase text-slate-400">Ruta por Orden de Selecci√≥n</p>
        </header>

        <div class="space-y-6">
            <div class="bg-slate-900 p-6 rounded-[2.5rem] text-white shadow-xl">
                <div class="grid grid-cols-2 gap-4 mb-4">
                    <div>
                        <label class="text-[8px] font-bold text-slate-400 uppercase">TRM Euro (COP)</label>
                        <input type="number" id="trm" value="4750" oninput="update()" class="w-full bg-transparent font-bold text-xl text-blue-400 outline-none">
                    </div>
                    <div>
                        <label class="text-[8px] font-bold text-slate-400 uppercase">Comida ‚Ç¨/D√≠a</label>
                        <input type="number" id="meal" value="45" oninput="update()" class="w-full bg-transparent font-bold text-xl text-blue-400 outline-none">
                    </div>
                </div>
            </div>

            <div>
                <h3 class="text-[10px] font-bold text-slate-400 uppercase mb-3 tracking-widest text-center">Toca las ciudades en el orden de visita</h3>
                <div id="cityList" class="grid grid-cols-2 gap-3"></div>
                <button onclick="reset()" class="w-full mt-4 py-3 bg-slate-100 rounded-2xl text-[10px] font-bold hover:bg-red-50 hover:text-red-500 transition uppercase">Limpiar Ruta</button>
            </div>

            <div class="p-5 bg-blue-50 rounded-[2rem] border border-blue-100">
                <h4 class="text-[10px] font-black text-blue-600 uppercase mb-3">Vuelos Internacionales (Ida/Vuelta)</h4>
                <div class="flex justify-between text-xs">
                    <span>BOG - BCN / EUR - BOG</span>
                    <span class="font-bold text-slate-700" id="vueloIntInfo">‚Ç¨ 1,300 | $ 6.1M</span>
                </div>
            </div>
        </div>
    </aside>

    <main class="flex-1 bg-[#fcfdfe] p-4 lg:p-10 overflow-y-auto custom-scroll">
        <div class="max-w-5xl mx-auto space-y-10">
            
            <div class="bg-white rounded-[3.5rem] p-10 border shadow-sm flex flex-col md:flex-row justify-between items-center gap-8">
                <div class="text-center md:text-left">
                    <p class="text-[10px] font-black text-blue-500 uppercase tracking-widest mb-1">Inversi√≥n Total por Persona</p>
                    <div class="flex flex-col">
                        <span id="totalIndividualCOP" class="text-5xl font-black text-slate-900 tracking-tighter">$ 0</span>
                        <span id="totalIndividualEUR" class="text-2xl font-bold text-blue-600">‚Ç¨ 0</span>
                    </div>
                </div>
                <div class="h-20 w-[1px] bg-slate-100 hidden md:block"></div>
                <div class="text-center md:text-right">
                    <p class="text-[9px] font-bold text-slate-400 uppercase italic mb-1">Total Familia (13 Pax)</p>
                    <p id="totalFamiliaCOP" class="text-2xl font-black text-slate-700">$ 0</p>
                    <button onclick="share()" class="mt-4 bg-green-500 text-white px-6 py-2 rounded-full text-[10px] font-bold hover:bg-green-600 transition">WhatsApp</button>
                </div>
            </div>

            <div id="itinerary" class="space-y-8"></div>
        </div>
    </main>

<script>
    /** EDITAR VALORES AQU√ç **/
    const VUELO_BOG_EUR = 1300; // Total ida y vuelta en Euros

    const database = [
        { id:'bcn', n:'Barcelona', lat:41, lng:2, hotel: 105, tras: 0, img:'https://images.unsplash.com/photo-1583422409516-2895a77efded?w=800', 
          desc: 'Entrada principal a Europa.', items: ['Sagrada Familia (‚Ç¨34)', 'Park G√ºell (‚Ç¨10)'] },
        
        { id:'par', n:'Par√≠s & Rouen', lat:48, lng:2, hotel: 140, tras: 120, img:'https://images.unsplash.com/photo-1502602898657-3e91760cbb34?w=800', 
          desc: 'Incluye d√≠a completo en Rouen e ida a Disney.', 
          items: ['Disney Premium (‚Ç¨115)', 'D√≠a en Rouen (Tren ‚Ç¨40)', 'Torre Eiffel + Arco (‚Ç¨45)'] },
        
        { id:'rom', n:'Roma', lat:41, lng:12, hotel: 115, tras: 95, img:'https://images.unsplash.com/photo-1552832230-c0197dd311b5?w=800', 
          desc: 'Caminatas intensas.', items: ['Coliseo (‚Ç¨22)', 'Vaticano (‚Ç¨35)'] },
        
        { id:'ven', n:'Venecia', lat:45, lng:12, hotel: 165, tras: 70, img:'https://images.unsplash.com/photo-1523906834658-6e24ef2386f9?w=800', 
          desc: 'Traslados en Vaporetto.', items: ['G√≥ndola (‚Ç¨80)', 'Plaza San Marcos (‚Ç¨0)'] },
        
        { id:'zrh', n:'Z√∫rich', lat:47, lng:8, hotel: 190, tras: 140, img:'https://images.unsplash.com/photo-1527668752968-14dc70a27c95?w=800', 
          desc: 'Ciudad base Suiza.', items: ['Museo Lindt (‚Ç¨15)'] }
    ];

    let select = [];

    function init() {
        const list = document.getElementById('cityList');
        database.forEach(c => {
            list.innerHTML += `
                <button onclick="toggle('${c.id}')" id="btn-${c.id}" class="relative city-btn p-4 rounded-2xl border bg-white text-[11px] font-extrabold transition hover:shadow-lg">
                    ${c.n}
                    <div id="badge-${c.id}" class="order-badge hidden"></div>
                </button>`;
        });
        update();
    }

    function toggle(id) {
        const idx = select.indexOf(id);
        if(idx > -1) {
            select.splice(idx, 1);
        } else {
            if(select.length < 6) select.push(id);
        }
        update();
    }

    function update() {
        const trm = document.getElementById('trm').value;
        const meal = parseInt(document.getElementById('meal').value);
        const diasC = select.length > 0 ? Math.floor(15/select.length) : 0;
        
        // Reset badges
        document.querySelectorAll('.order-badge').forEach(b => b.classList.add('hidden'));
        document.querySelectorAll('.city-btn').forEach(b => b.classList.remove('active', 'border-blue-500'));

        let totalEur = select.length > 0 ? VUELO_BOG_EUR : 0;
        const itin = document.getElementById('itinerary');
        itin.innerHTML = "";

        // Mostrar informaci√≥n de vuelos corregida
        document.getElementById('vueloIntInfo').innerText = `‚Ç¨ ${VUELO_BOG_EUR.toLocaleString()} | $ ${(VUELO_BOG_EUR * trm).toLocaleString('es-CO')}`;

        select.forEach((sid, index) => {
            const c = database.find(x => x.id === sid);
            const badge = document.getElementById('badge-'+sid);
            badge.innerText = index + 1;
            badge.classList.remove('hidden');
            document.getElementById('btn-'+sid).classList.add('active', 'border-blue-500');

            // L√≥gica de costos (Euros)
            const costoTraslado = index === 0 ? 0 : c.tras; 
            const costoHotel = c.hotel * diasC;
            const costoComida = meal * diasC;
            const subtotalEur = costoHotel + costoComida + costoTraslado;
            totalEur += subtotalEur;

            // L√≥gica de conversi√≥n (Pesos)
            const subtotalCOP = subtotalEur * trm;

            itin.innerHTML += `
                <div class="bg-white rounded-[2.5rem] overflow-hidden border shadow-sm flex flex-col md:flex-row">
                    <div class="md:w-1/3 h-48 md:h-auto relative">
                        <img src="${c.img}" class="w-full h-full object-cover">
                        <div class="absolute top-4 left-4 bg-blue-600 text-white w-10 h-10 rounded-full flex items-center justify-center font-black shadow-xl">
                            ${index + 1}
                        </div>
                    </div>
                    <div class="p-8 flex-1">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 class="text-2xl font-black text-slate-800">${c.n}</h3>
                                <p class="text-xs text-slate-400 font-bold uppercase tracking-widest">${diasC} D√≠as de estancia</p>
                            </div>
                            <div class="text-right">
                                <p class="text-lg font-black text-blue-600">‚Ç¨ ${subtotalEur}</p>
                                <p class="text-[10px] font-bold text-slate-400">$ ${subtotalCOP.toLocaleString('es-CO')}</p>
                            </div>
                        </div>
                        <div class="grid grid-cols-3 gap-2 mb-6">
                            <div class="bg-slate-50 p-3 rounded-2xl text-center">
                                <p class="text-[8px] font-bold text-slate-400 uppercase">Hospedaje</p>
                                <p class="text-[10px] font-black italic">‚Ç¨${costoHotel} | $${(costoHotel*trm).toLocaleString()}</p>
                            </div>
                            <div class="bg-slate-50 p-3 rounded-2xl text-center">
                                <p class="text-[8px] font-bold text-slate-400 uppercase">Comidas</p>
                                <p class="text-[10px] font-black italic">‚Ç¨${costoComida} | $${(costoComida*trm).toLocaleString()}</p>
                            </div>
                            <div class="bg-blue-50 p-3 rounded-2xl text-center">
                                <p class="text-[8px] font-bold text-blue-400 uppercase">Traslado</p>
                                <p class="text-[10px] font-black italic">‚Ç¨${costoTraslado} | $${(costoTraslado*trm).toLocaleString()}</p>
                            </div>
                        </div>
                        <div class="flex gap-2 overflow-x-auto pb-2 custom-scroll">
                            ${c.items.map(item => `<span class="bg-slate-100 px-3 py-1 rounded-full text-[9px] font-bold text-slate-600 whitespace-nowrap">${item}</span>`).join('')}
                        </div>
                    </div>
                </div>`;
        });

        // Actualizar Totales Finales
        document.getElementById('totalIndividualCOP').innerText = "$ " + (totalEur * trm).toLocaleString('es-CO');
        document.getElementById('totalIndividualEUR').innerText = "‚Ç¨ " + totalEur.toLocaleString();
        document.getElementById('totalFamiliaCOP').innerText = "$ " + (totalEur * trm * 13).toLocaleString('es-CO');
    }

    function reset() { select = []; update(); }
    function share() {
        const text = `*PLAN EUROPA 2027 v8*%0Aüë§ Individual: ${document.getElementById('totalIndividualCOP').innerText}%0Aüí∞ Total 13 Pax: ${document.getElementById('totalFamiliaCOP').innerText}%0Aüìç Ruta: ${select.join(' -> ').toUpperCase()}`;
        window.open(`https://wa.me/?text=${text}`, '_blank');
    }

    window.onload = init;
</script>
</body>
</html>
